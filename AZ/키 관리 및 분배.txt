암호 시스템이 뚫릴 때는 암호 알고리즘이 허술해서 그런 것이 아니다. 지금은 쓰지 않는 DES조차 알고리즘 자체는 괜찮다. 다만, 시대가 변하면서 상대적으로 키의 길이가 점점 짧아지기 때문에 뚫리게 된다. 키 관리와 분배가 무엇인지에 대해서는 간단한 예시를 들 수 있겠다. 키 관리의 예는 우리가 모 사이트에 접속하면 몇 개월에 한 번씩 비밀번호를 바꾸도록 안내한다. 이를 키 관리의 예시로 볼 수 있고 키 분배의 예는 대칭키 시스템에서 어떻게 키를 양쪽이 안전하게 공유하는가에 대한 문제이다. 말은 쉽지만 외부에 노출시키지 않고 양 종단이 안전하게 키를 나눠같는 것은 쉬운 일이 아니다.

1) 키 분배 방법
대칭키 시스템에서 양쪽이 키를 나눠같는 방법은 어떤 것이 있을까.
- physically : 물리적으로 만나서 나눠갖는 방법
- third party : 믿을만한 제 3자에게 중개를 요청하는 방법
- previous key : 만약 A와 B가 이미 안전하게 통신했던 상태라면 새로운 키를 이전 키로 암호화해서 보낸다.
- relay : A,B 모두 안전한 통신망이 갖추고 있는 C를 통해 A->C->B , B->C->A의 경로로 통신한다.

2) 키의 계층 구조
키에도 계층 구조가 있다. 오래 쓰는 키냐, 잠시 쓰는 키냐에 따라 구분한다.
Short-turm key - Session Key : 일시적, 사용자간의 데이터 암호화
Long-tum  Key - Master Key : 세션 키를 암호화해서 전달하는데 사용, 유저와 KDC(Key Distribution Center)간에 사용.

이 때 KDC는 센터에 등록된 사용자의 마스터키를 가지고 있다. N2를 변형하는 이유는, N2를 그대로 회신하게 되면 보낼 때 받은 N2와 구분이 되지 않기 때문이다.
Hierarchies of KDC 를 적용하기 위해서는 사용자가 KDC를 신뢰할 수 있어야한다. 사용자가 자신의 master key를 KDC에 맡겨야 하기 때문이다. Ks(Session Key)는 정해진 기한만 쓰고 버려져야 보안성을 유지할 수 있다. 키 분배 작업은 자동화 될 수 있어야 한다.
KDC는 중앙 집중형에 해당한다. 중앙 집중형 시스템은 구현도 쉽고 관리도 쉽다. 그러나 중앙이 망가지면 전체 기능이 마비된다.
분산형은 이와 반대로 하나의 노드가 망가져도 그 피해가 전체에 미치지는 않는다. 하지만 구현도, 관리도 어렵고 복제 문제가 발생할 수 있다. 블록체인이 여기에 해당한다.

3) 비밀키 분배(Secret Key Distribution)
일반적으로 데이터를 암/복호화 할 때는 대칭키 시스템을 이용한다. 공개키 시스템을 이용하게 되면 대칭키 시스템에 비하여 속도가 현저히 느려지기 때문이다. 따라서 공개키 시스템은 꼭 필요한 지점에서만 사용하게 된다. 예를 들어 대칭키에 사용될 키값은 사전에 안전하게 양 종단이 공유해야 하므로 이 경우에만 공개키 시스템을 이용하여 키를 안전하게 교환한다.

4) 공개키 분배(Distribution of Public Keys)
공개키를 이용한 세션키 분배 방식도 있다. 몇 가지 형태가 있다.
- public announcement : 공개적으로 명시하는 것
- publicly available directory : 예를 들면 공개키가 명시된 전화번호부 같은 곳.
- public-key authority : 공개키를 요청하면 발급해주는 기관을 둔다
- public-key certificates : 공인 인증서 방식(가장 많이 쓰임)

public-key authority는 온라인상의 서버에 접속해서 원하는 사람의 공개키를 다운받아 쓰는 방식이고, public-key certificates는 오프라인 매체에 담아서 이용할 수 있다는 차이점이 있다.
public-key authority의 단점은 반드시 온라인으로 접속해야만 다른사람의 공개키를 받을 수 있다는 것이다. 이러한 불편함 때문에 오프라인으로 검증 가능한 체계를 만든 것이 공인 인증서이다.
사용자는 자신의 공개키가 들어있는 공인 인증서를 하나씩 갖게 된다. 이 때 CA는 우리 입장에서 금융 결제원 정도가 되겠다. 금융 결제원은 이 공개키(PUa, PUb)가 A,B라는 사람의 것이라는 것을 증명해주면서 그 사람 공개키에 대한 인증서(Ca, Cb)를 발급해준다. 하지만 인증서 사용하는 절차에 온라인 접속이 전혀 필요 없는 것은 아니다. 인증서 자체에 대한 검증 단계에서 온라인 접속이 필요치 않을 뿐이다. 예를 들어 인증서를 철회하는 경우 온라인 상에 있는 철회 목록에 등록된다. 그래서 인증서를 검증할 때 가장 먼저 하는 것이 인증서의 유효기간을 확인한 뒤 온라인 철회목록에 등록된 인증서인지 확인한다.

​X.509는 공인 인증서에 대한 국제 규격이다. 공인 인증서는 우리나라만 쓰는 것이 아니라 국제 표준이다.
그런데 우리의 개인키는 이 안에 왜 없나? 공인 인증서 안에는 개인키가 없다. 개인키는 원래 우리 머릿속에 있어야 하는데 우리가 기억하기에 2048bit은 너무 길다. 그래서 파일로 만들어 공인인증서 옆에 같이 두고 대칭키 알고리즘으로 암호화 해놓는다. 이 대칭키 알고리즘을 풀기 위해 입력하는 것이 우리가 입력하는 공인인증서 비밀번호이다. 즉, 공인인증서 안에 개인키는 없고 '소유자와 발급기관에 대한 정보', '소유자의 공개키', '발급자의 공개키' 크게 세 가지 내용이 들어있다.
Exetentions 추가 정보에 들어가는 내용은 사용자와 인증기관의 키에 대한 관련정보와 인증 정책에 대한 내용, 제한사항 등이다.

​
